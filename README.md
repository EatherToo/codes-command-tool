# Node.js Library Scaffold

ä¸€ä¸ªç°ä»£åŒ–çš„ Node.js åº“è„šæ‰‹æ¶é¡¹ç›®ï¼Œæä¾›å®Œæ•´çš„å¼€å‘å·¥å…·é“¾é…ç½®ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿåˆ›å»ºé«˜è´¨é‡çš„ TypeScript åº“ã€‚

## âœ¨ è„šæ‰‹æ¶ç‰¹æ€§

- ğŸš€ **ç°ä»£åŒ–æ„å»ºå·¥å…·**: é¢„é…ç½® Rollup + tsup åŒæ ¼å¼æ‰“åŒ… (ESM + CommonJS)
- ğŸ“ **TypeScript æ”¯æŒ**: å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œä¸¥æ ¼æ¨¡å¼é…ç½®
- ğŸ§ª **æµ‹è¯•æ¡†æ¶**: Jest æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒä»£ç è¦†ç›–ç‡
- ğŸ“š **æ–‡æ¡£ç”Ÿæˆ**: TypeDoc è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
- ğŸ”§ **ä»£ç è´¨é‡**: oxlint + Prettier ä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥
- ğŸ“¦ **å¤šæ ¼å¼è¾“å‡º**: æ”¯æŒ ESM å’Œ CommonJS ä¸¤ç§æ¨¡å—æ ¼å¼
- ğŸ¯ **å¼€ç®±å³ç”¨**: æ‰€æœ‰é…ç½®éƒ½å·²é¢„è®¾ï¼Œæ— éœ€é¢å¤–é…ç½®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†è„šæ‰‹æ¶

```bash
git clone <your-scaffold-repo-url> my-library
cd my-library
```

### 2. åˆå§‹åŒ–é¡¹ç›®

```bash
# å®‰è£…ä¾èµ–
pnpm install

# æ¸…ç†ç¤ºä¾‹ä»£ç ï¼ˆå¯é€‰ï¼‰
rm -rf src/*
# ç„¶åæ·»åŠ æ‚¨è‡ªå·±çš„ä»£ç 
```

### 3. ä¿®æ”¹é¡¹ç›®ä¿¡æ¯

ç¼–è¾‘ `package.json` æ–‡ä»¶ï¼š

```json
{
  "name": "your-library-name",
  "version": "1.0.0",
  "description": "Your library description",
  "author": "Your Name",
  "license": "MIT"
}
```

### 4. å¼€å§‹å¼€å‘

```bash
# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰
pnpm run dev

# æ„å»ºé¡¹ç›®
pnpm run build

# è¿è¡Œæµ‹è¯•
pnpm run test
```

## ğŸ› ï¸ è„šæ‰‹æ¶ç»“æ„

```
project-root/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ index.ts           # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ index.test.ts      # ä¸»æ¨¡å—æµ‹è¯•
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°ç›®å½•
â”‚       â”œâ”€â”€ index.ts       # å·¥å…·å‡½æ•°å®ç°
â”‚       â””â”€â”€ index.test.ts  # å·¥å…·å‡½æ•°æµ‹è¯•
â”œâ”€â”€ dist/                  # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ docs/                  # æ–‡æ¡£è¾“å‡ºç›®å½•
â”œâ”€â”€ scripts/               # æ„å»ºè„šæœ¬
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json          # TypeScript é…ç½®
â”œâ”€â”€ rollup.config.js       # Rollup æ‰“åŒ…é…ç½®
â”œâ”€â”€ tsup.config.ts         # tsup é…ç½®
â”œâ”€â”€ jest.config.js         # Jest æµ‹è¯•é…ç½®
â”œâ”€â”€ typedoc.json           # TypeDoc æ–‡æ¡£é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## ğŸ“‹ å¯ç”¨è„šæœ¬

### æ„å»ºç›¸å…³

```bash
# å®Œæ•´æ„å»ºï¼ˆRollup + tsupï¼‰
pnpm run build

# ä»… Rollup æ„å»º
pnpm run build:rollup

# ä»…ç”Ÿæˆç±»å‹å£°æ˜
pnpm run build:types

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰
pnpm run dev

# æ¸…ç†æ„å»ºæ–‡ä»¶
pnpm run clean
```

### æµ‹è¯•ç›¸å…³

```bash
# è¿è¡Œæµ‹è¯•
pnpm run test

# æµ‹è¯•ç›‘å¬æ¨¡å¼
pnpm run test:watch

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
pnpm run test:coverage

# CI ç¯å¢ƒæµ‹è¯•
pnpm run test:ci
```

### ä»£ç è´¨é‡

```bash
# ä»£ç æ£€æŸ¥
pnpm run lint

# ä»£ç æ£€æŸ¥å¹¶è‡ªåŠ¨ä¿®å¤
pnpm run lint:fix

# ä»£ç æ ¼å¼åŒ–
pnpm run format

# æ£€æŸ¥ä»£ç æ ¼å¼
pnpm run format:check
```

### æ–‡æ¡£ç”Ÿæˆ

```bash
# ç”Ÿæˆæ–‡æ¡£
pnpm run docs

# ç”Ÿæˆæ–‡æ¡£å¹¶å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
pnpm run docs:serve
```

## âš™ï¸ é…ç½®è¯´æ˜

### TypeScript é…ç½® (`tsconfig.json`)

è„šæ‰‹æ¶ä½¿ç”¨ä¸¥æ ¼çš„ TypeScript é…ç½®ï¼š

- ç›®æ ‡: ES2020
- æ¨¡å—: ESNext
- ä¸¥æ ¼æ¨¡å¼: å¯ç”¨æ‰€æœ‰ä¸¥æ ¼æ£€æŸ¥
- å£°æ˜æ–‡ä»¶: è‡ªåŠ¨ç”Ÿæˆ
- æºç æ˜ å°„: å¯ç”¨

### æ„å»ºé…ç½®

#### Rollup é…ç½® (`rollup.config.js`)
- ç”Ÿæˆ ESM å’Œ CommonJS åŒæ ¼å¼
- è‡ªåŠ¨æ’é™¤ Node.js å†…ç½®æ¨¡å—
- æ”¯æŒæºç æ˜ å°„

#### tsup é…ç½® (`tsup.config.ts`)
- ç”Ÿæˆ TypeScript å£°æ˜æ–‡ä»¶
- ç›®æ ‡: ES2020
- æ¸…ç†è¾“å‡ºç›®å½•

### æµ‹è¯•é…ç½® (`jest.config.js`)

- æ”¯æŒ TypeScript å’Œ ESM
- ä»£ç è¦†ç›–ç‡é˜ˆå€¼: 80%
- ç”Ÿæˆ HTML è¦†ç›–ç‡æŠ¥å‘Š
- è‡ªåŠ¨æ¸…ç†æ¨¡æ‹Ÿ

### æ–‡æ¡£é…ç½® (`typedoc.json`)

- è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
- åŒ…å«ç‰ˆæœ¬ä¿¡æ¯
- æ’é™¤ç§æœ‰æˆå‘˜
- æ”¯æŒæœç´¢åŠŸèƒ½

## ğŸ“¦ å‘å¸ƒå‡†å¤‡

### 1. æ›´æ–°ç‰ˆæœ¬å·

```bash
# ä½¿ç”¨ npm version æˆ–æ‰‹åŠ¨ç¼–è¾‘ package.json
npm version patch  # æˆ– minor, major
```

### 2. æ„å»ºå’Œæµ‹è¯•

```bash
# æ¸…ç†å¹¶é‡æ–°æ„å»º
pnpm run clean
pnpm run build

# è¿è¡Œæµ‹è¯•
pnpm run test:ci
```

### 3. å‘å¸ƒ

```bash
# å‘å¸ƒåˆ° npmï¼ˆä¼šè‡ªåŠ¨è¿è¡Œ prepublishOnly è„šæœ¬ï¼‰
pnpm publish
```

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### æ·»åŠ æ–°çš„ä¾èµ–

```bash
# ç”Ÿäº§ä¾èµ–
pnpm add <package-name>

# å¼€å‘ä¾èµ–
pnpm add -D <package-name>
```

### ä¿®æ”¹æ„å»ºé…ç½®

ç¼–è¾‘ `rollup.config.js` æˆ– `tsup.config.ts` æ¥è‡ªå®šä¹‰æ„å»ºè¡Œä¸ºã€‚

### æ·»åŠ æ–°çš„è„šæœ¬

åœ¨ `package.json` çš„ `scripts` éƒ¨åˆ†æ·»åŠ è‡ªå®šä¹‰è„šæœ¬ã€‚

## ğŸ¯ æœ€ä½³å®è·µ

### ä»£ç ç»„ç»‡

1. **æ¨¡å—åŒ–**: å°†åŠŸèƒ½åˆ†è§£ä¸ºå°çš„ã€å¯æµ‹è¯•çš„æ¨¡å—
2. **ç±»å‹å®‰å…¨**: å……åˆ†åˆ©ç”¨ TypeScript çš„ç±»å‹ç³»ç»Ÿ
3. **æµ‹è¯•è¦†ç›–**: ä¸ºæ‰€æœ‰å…¬å…± API ç¼–å†™æµ‹è¯•
4. **æ–‡æ¡£**: ä½¿ç”¨ JSDoc æ³¨é‡Šæ–‡æ¡£åŒ– API

### å¼€å‘æµç¨‹

1. ç¼–å†™ä»£ç å’Œæµ‹è¯•
2. è¿è¡Œ `pnpm run lint` æ£€æŸ¥ä»£ç è´¨é‡
3. è¿è¡Œ `pnpm run test` ç¡®ä¿æµ‹è¯•é€šè¿‡
4. è¿è¡Œ `pnpm run build` éªŒè¯æ„å»º
5. æäº¤ä»£ç 

### å‘å¸ƒæµç¨‹

1. æ›´æ–°ç‰ˆæœ¬å·
2. è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
3. æ„å»ºé¡¹ç›®
4. ç”Ÿæˆæ–‡æ¡£
5. å‘å¸ƒåˆ° npm

## ğŸ› å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ–°çš„å·¥å…·å‡½æ•°ï¼Ÿ

A: åœ¨ `src/utils/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå¹¶åœ¨ `src/utils/index.ts` ä¸­å¯¼å‡ºã€‚

### Q: å¦‚ä½•ä¿®æ”¹æ„å»ºè¾“å‡ºæ ¼å¼ï¼Ÿ

A: ç¼–è¾‘ `rollup.config.js` æ–‡ä»¶ä¸­çš„ `output.format` é…ç½®ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„æµ‹è¯•ï¼Ÿ

A: åˆ›å»º `.test.ts` æ–‡ä»¶ï¼ŒJest ä¼šè‡ªåŠ¨å‘ç°å¹¶è¿è¡Œã€‚

### Q: å¦‚ä½•è‡ªå®šä¹‰æ–‡æ¡£ç”Ÿæˆï¼Ÿ

A: ç¼–è¾‘ `typedoc.json` æ–‡ä»¶ä¸­çš„é…ç½®é€‰é¡¹ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªè„šæ‰‹æ¶ï¼

---

**æç¤º**: è¿™ä¸ªè„šæ‰‹æ¶ä¸ºæ‚¨æä¾›äº†å®Œæ•´çš„å¼€å‘ç¯å¢ƒï¼Œæ‚¨åªéœ€è¦ä¸“æ³¨äºç¼–å†™ä¸šåŠ¡é€»è¾‘å³å¯ï¼

